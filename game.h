#define VIDEO_MEMORY 0x0400
#define SNAKE_HEAD 35
#define SNAKE_TAIL 43
#define SNAKE_BODY 87

#define EMPTY 32
#define APPLE 88
#define WALL 102

#define GAME_INTRO 1
#define GAME_PLAY 2

#define SNAKE_RIGHT 1
#define SNAKE_DOWN 40
#define SNAKE_LEFT -1
#define SNAKE_UP -40

#define ACTION_SNAKE_NOTHING 0
#define ACTION_SNAKE_DEAD 1
#define ACTION_SNAKE_LEVELUP 2

unsigned char intro_packed[] = {
    0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x03,0x08,0x01,0x12,0x13,0x0e,0x01,0x0b,0x05,0x36,0x34,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
    0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x77,0x77,0x77,0x77,0x77,0x77,0x77,0x77,0x77,0x77,0x77,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
    0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
    0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
    0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x2b,0x57,0x57,0x57,0x7b,0x20,0x20,0x20,0x20,0x6C,0x57,0x57,0x57,0x57,0x23,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
    0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x57,0x20,0x20,0x20,0x20,0x57,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
    0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x57,0x20,0x20,0x20,0x20,0x57,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
    0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x7c,0x57,0x57,0x57,0x57,0x7e,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
    0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
    0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
    0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
    0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
    0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
    0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
    0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,
    0x20,0x20,0x20,0x20,0x20,0x20,0x10,0x12,0x05,0x13,0x13,0x20,0x06,0x09,0x12,0x05,0x20,0x0f,0x0e,0x20,0x0a,0x0f,0x19,0x20,0x32,0x20,0x14,0x0f,0x20,0x13,0x14,0x01,0x12,0x14,0x20,0x20,0x20,0x20,0x20,0x20    
};

unsigned char level1[] = {
    0xff,40,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102, 0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102, 0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102, 0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,40,102,
    0x00,0x00,0x00
};

unsigned char level2[] = {
    0xff,40,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,40,102,
    0x00,0x00,0x00
};

unsigned char level3[] = {
    0xff,40,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102, 0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,5,0x20, 0xff,28,102, 0xff,5,0x20, 0xff,1,102,
    0xff,1,102, 0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,5,0x20, 0xff,28,102, 0xff,5,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102, 0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,40,102,
    0x00,0x00,0x00
};

unsigned char level4[] = {
    0xff,40,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,8,0x20, 0xff,11,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
   	0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
   	0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,11,102,0xff,9,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
   	0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
   	0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,40,102,
    0x00,0x00,0x00
};

unsigned char level5[] = {
    0xff,40,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
   	0xff,1,102, 0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
   	0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,10,102,0xff,10,0x20,0xff,1,102,
   	0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
   	0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,18,0x20, 0xff,1,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,9,0x20, 0xff,10,102,0xff,19,0x20,0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102, 0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,40,102,
    0x00,0x00,0x00
};

unsigned char level6[] = {
    0xff,40,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102, 0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,5,0x20, 0xff,28,102, 0xff,5,0x20, 0xff,1,102,
    0xff,1,102, 0xff,5,0x20, 0xff,1,102, 0xff,32,0x20, 0xff,1,102,
    0xff,1,102, 0xff,5,0x20, 0xff,1,102, 0xff,32,0x20, 0xff,1,102,
    0xff,1,102, 0xff,5,0x20, 0xff,1,102, 0xff,32,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102, 0xff,32,0x20, 0xff,1,102, 0xff,5,0x20, 0xff,1,102,
    0xff,1,102, 0xff,32,0x20, 0xff,1,102, 0xff,5,0x20, 0xff,1,102,
    0xff,1,102, 0xff,32,0x20, 0xff,1,102, 0xff,5,0x20, 0xff,1,102,
    0xff,1,102,	0xff,5,0x20, 0xff,28,102, 0xff,5,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102, 0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,1,102,	0xff,38,0x20, 0xff,1,102,
    0xff,40,102,
    0x00,0x00,0x00
};

signed char screen[1024];
void *levels[] = {&level1, &level2, &level3, &level4, &level5, &level6};
char lives[][4] = {" ", "# ", "## ", "###"};

#pragma bss-name (push,"ZEROPAGE")
#pragma data-name (push,"ZEROPAGE")

unsigned char *curlevel;
typedef struct  {
    unsigned int head;
    unsigned int tail;
    unsigned char grow;
    unsigned char apples;
    signed char direction;
    unsigned char body_chr;
    unsigned char speed; //in raster irq frames
    unsigned char updated; //in raster irq frames
} snake_t;

struct {
    snake_t snake;
    unsigned int score;
    char lives;
    char level;
} pup;
#pragma bss-name (pop)
#pragma data-name (pop)
